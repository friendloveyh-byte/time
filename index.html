<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>자격검정 종료시간</title>
<style>
    body {
        margin: 0;
        padding: 0;
        background: #f2f2f2;
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        text-align: center;
    }

    h1 {
        font-size: 42px;
        margin-bottom: 30px;
        font-weight: bold;
    }

    /* 입력 영역 */
    #setup-box {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    input {
        width: 120px;
        padding: 12px;
        font-size: 26px;
        border-radius: 10px;
        border: 2px solid #ccc;
        text-align: center;
    }

    button {
        padding: 12px 30px;
        font-size: 22px;
        border: none;
        border-radius: 10px;
        color: white;
        background: #28a745;
    }

    /* 출력 영역 */
    #result {
        display: none;
        margin-top: 20px;
    }

    #currentTime {
        font-size: 48px;
        font-weight: bold;
        margin-bottom: 10px;
    }

    #endTime {
        font-size: 28px;
        color: #444;
        margin-bottom: 25px;
    }

    #remainTime {
        font-size: 56px;
        font-weight: bold;
        color: red;
        margin-bottom: 30px;
    }

    #resetBtn {
        padding: 10px 25px;
        font-size: 20px;
        background: #d9534f;
        border: none;
        border-radius: 10px;
        color: white;
    }
</style>
</head>
<body>

<h1 id="mainTitle">자격검정 종료시간</h1>

<div id="setup-box">
    <input type="number" id="hour" placeholder="시" min="0" max="23">
    <input type="number" id="minute" placeholder="분" min="0" max="59">
    <button onclick="setTime()">설정</button>
</div>

<div id="result">
    <div id="currentTime"></div>
    <div id="endTime"></div>
    <div id="remainTime"></div>
    <button id="resetBtn" onclick="resetTimer()">재설정</button>
</div>

<script>
    function setTime() {
        const hour = document.getElementById("hour").value;
        const minute = document.getElementById("minute").value;

        if (hour === "" || minute === "") {
            alert("시와 분을 모두 입력하세요!");
            return;
        }

        const now = new Date();
        const end = new Date();
        end.setHours(hour);
        end.setMinutes(minute);
        end.setSeconds(0);

        localStorage.setItem("endHour", hour);
        localStorage.setItem("endMinute", minute);

        document.getElementById("setup-box").style.display = "none";
        document.getElementById("mainTitle").style.display = "none";
        document.getElementById("result").style.display = "block";

        updateClock();
        setInterval(updateClock, 1000);
    }

    function updateClock() {
        const endHour = localStorage.getItem("endHour");
        const endMinute = localStorage.getItem("endMinute");

        if (!endHour || !endMinute) return;

        const now = new Date();
        const end = new Date();
        end.setHours(endHour);
        end.setMinutes(endMinute);
        end.setSeconds(0);

        document.getElementById("currentTime").innerText =
            `현재시간 : ${now.getHours()}시 ${now.getMinutes()}분 ${now.getSeconds()}초`;

        document.getElementById("endTime").innerText =
            `(종료시간 : ${endHour}시 ${endMinute}분)`;

        let diff = Math.floor((end - now) / 1000);

        if (diff < 0) diff = 0;

        const h = Math.floor(diff / 3600);
        const m = Math.floor((diff % 3600) / 60);
        const s = diff % 60;

        document.getElementById("remainTime").innerText =
            `${h}시간 ${m}분 ${s}초`;
    }

    function resetTimer() {
        localStorage.removeItem("endHour");
        localStorage.removeItem("endMinute");
        location.reload();
    }

    // 자동 로드
    window.onload = function () {
        if (localStorage.getItem("endHour")) {
            document.getElementById("setup-box").style.display = "none";
            document.getElementById("mainTitle").style.display = "none";
            document.getElementById("result").style.display = "block";
            setInterval(updateClock, 1000);
            updateClock();
        }
    };
</script>

</body>
</html>
